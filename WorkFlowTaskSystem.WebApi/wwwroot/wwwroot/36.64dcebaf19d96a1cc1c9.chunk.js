webpackJsonp([36],{291:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(516),o=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,function(){return a[e]})}(s);var n=r(903),i=r.n(n),l=r(3),c=l(o.a,i.a,!1,null,null,null);c.options.__file="src\\views\\baseInfo\\role.vue",t.default=c.exports},516:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(11),s=a(o),n=r(12),i=a(n);t.default={methods:{create:function(){this.editRole={},this.$store.dispatch({type:"role/getrole",data:"-1"}),this.showModal=!0},save:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(s.default.mark(function e(){var t=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.editRole.id?this.$refs.roleForm.validate(function(){var e=(0,i.default)(s.default.mark(function e(r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return a=[],o=t.$refs.rupers.getCheckedNodes(),o.forEach(function(e,t,r){a.push(e.id)}),t.editRole.persIds=a,e.next=7,t.$store.dispatch({type:"role/update",data:t.editRole});case 7:return t.showEditModal=!1,t.$Message.success("保存成功！"),e.next=11,t.getpage();case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()):this.$refs.newRoleForm.validate(function(){var e=(0,i.default)(s.default.mark(function e(r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return a=[],o=t.$refs.rcpers.getCheckedNodes(),o.forEach(function(e,t,r){a.push(e.id)}),t.editRole.persIds=a,e.next=7,t.$store.dispatch({type:"role/create",data:t.editRole});case 7:return t.showModal=!1,t.$Message.success("添加成功！"),e.next=11,t.getpage();case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return e}(),pageChange:function(e){this.$store.commit("role/setCurrentPage",e),this.getpage()},pagesizeChange:function(e){this.$store.commit("role/setPageSize",e),this.getpage()},getpage:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch({type:"role/getAll"});case 2:case"end":return e.stop()}},e,this)}));return e}(),onselectionchange:function(e){this.selectedData=e},handleClickActionsDropdown:function(e){"Create"===e?this.create():"Refresh"===e&&(this.getpage(),this.$Message.success("刷新成功！"))}},data:function(){var e=this;return{editRole:{},persBtn:{create:abp.auth.isGranted("Pages.Roles.Create"),update:abp.auth.isGranted("Pages.Roles.Update"),delete:abp.auth.isGranted("Pages.Roles.Delete"),setPers:abp.auth.isGranted("Pages.Roles.SetPers")},showModal:!1,showEditModal:!1,selectedData:[],newRoleRule:{name:[{required:!0,message:"Name is required",trigger:"blur"}],code:[{required:!0,message:"Code is required",trigger:"blur"}]},roleRule:{name:[{required:!0,message:"Name is required",trigger:"blur"}],code:[{required:!0,message:"Code is required",trigger:"blur"}]},columns:[{type:"index",width:60,align:"center"},{title:this.L("角色名称"),key:"name"},{title:this.L("角色编码"),key:"code"},{title:this.L("操作"),key:"action",width:150,render:function(t,r){var a=[];if(e.persBtn.update){var o=t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editRole=e.roles[r.index],e.$store.dispatch({type:"role/getrole",data:e.editRole.id}),e.showEditModal=!0}}},e.L("编辑"));a.push(o)}if(e.persBtn.delete){var n=t("Button",{props:{type:"error",size:"small"},on:{click:function(){function t(){return a.apply(this,arguments)}var a=(0,i.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$Modal.confirm({title:e.L(""),content:e.L("删除这个角色吗？"),okText:e.L("是"),cancelText:e.L("否"),onOk:function(){function t(){return a.apply(this,arguments)}var a=(0,i.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"role/delete",data:e.roles[r.index]});case 2:return e.$Message.success("删除成功！"),t.next=5,e.getpage();case 5:case"end":return t.stop()}},t,e)}));return t}()});case 1:case"end":return t.stop()}},t,e)}));return t}()}},e.L("删除"));a.push(n)}return t("div",a)}}]}},computed:{roles:function(){return this.$store.state.role.roles},permissions:function(){return this.$store.state.role.permissions},totalCount:function(){return this.$store.state.role.totalCount},currentPage:function(){return this.$store.state.role.currentPage},pageSize:function(){return this.$store.state.role.pageSize},pers:function(){return this.$store.state.role.pers}},created:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getpage();case 1:case"end":return e.stop()}},e,this)}));return e}()}},903:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e._f("l")("角色管理")))]),e._v(" "),r("Dropdown",{attrs:{slot:"extra"},on:{"on-click":e.handleClickActionsDropdown},slot:"extra"},[r("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n                "+e._s(e._f("l")("操作"))+"\n                "),r("Icon",{attrs:{type:"android-more-vertical"}})],1),e._v(" "),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{attrs:{name:"Refresh"}},[e._v(e._s(e._f("l")("刷新")))]),e._v(" "),e.persBtn.create?r("DropdownItem",{attrs:{name:"Create"}},[e._v(e._s(e._f("l")("添加")))]):e._e()],1)],1),e._v(" "),r("Table",{attrs:{columns:e.columns,border:"",data:e.roles}}),e._v(" "),r("Page",{staticClass:"margin-top-10",attrs:{total:e.totalCount,"page-size":e.pageSize,current:e.currentPage,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pagesizeChange}})],1),e._v(" "),r("Modal",{attrs:{title:e.L("添加"),okText:e.L("save"),cancelText:e.L("cancel")},on:{"on-ok":e.save},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[r("div",[r("Tabs",[r("TabPane",{attrs:{label:"角色信息",icon:"ios-list"}},[r("Form",{ref:"newRoleForm",attrs:{"label-position":"top",rules:e.newRoleRule,model:e.editRole}},[r("FormItem",{attrs:{label:e.L("角色名称"),prop:"name"}},[r("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editRole.name,callback:function(t){e.$set(e.editRole,"name",t)},expression:"editRole.name"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.L("角色编码"),prop:"code"}},[r("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editRole.code,callback:function(t){e.$set(e.editRole,"code",t)},expression:"editRole.code"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.L("描述"),prop:"description"}},[r("Input",{model:{value:e.editRole.description,callback:function(t){e.$set(e.editRole,"description",t)},expression:"editRole.description"}})],1)],1)],1),e._v(" "),e.persBtn.setPers?r("TabPane",{attrs:{label:"权限",icon:"gear-b"}},[r("div",{staticStyle:{"max-height":"320px","overflow-y":"auto"}},[r("Tree",{ref:"rcpers",attrs:{data:e.pers,"show-checkbox":"",multiple:""}})],1)]):e._e()],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(t){e.showModal=!1}}},[e._v(e._s(e._f("l")("取消")))]),e._v(" "),r("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e._f("l")("确定")))])],1)]),e._v(" "),r("Modal",{attrs:{title:e.L("编辑"),okText:e.L("save"),cancelText:e.L("cancel")},on:{"on-ok":e.save},model:{value:e.showEditModal,callback:function(t){e.showEditModal=t},expression:"showEditModal"}},[r("div",[r("Tabs",[r("TabPane",{attrs:{label:"角色信息",icon:"ios-list"}},[r("Form",{ref:"roleForm",attrs:{"label-position":"top",rules:e.roleRule,model:e.editRole}},[r("FormItem",{attrs:{label:e.L("角色名称"),prop:"name"}},[r("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editRole.name,callback:function(t){e.$set(e.editRole,"name",t)},expression:"editRole.name"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.L("角色编码"),prop:"code"}},[r("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editRole.code,callback:function(t){e.$set(e.editRole,"code",t)},expression:"editRole.code"}})],1),e._v(" "),r("FormItem",{attrs:{label:e.L("描述"),prop:"description"}},[r("Input",{model:{value:e.editRole.description,callback:function(t){e.$set(e.editRole,"description",t)},expression:"editRole.description"}})],1)],1)],1),e._v(" "),e.persBtn.setPers?r("TabPane",{attrs:{label:"权限",icon:"gear-b"}},[r("div",{staticStyle:{"max-height":"320px","overflow-y":"auto"}},[r("Tree",{ref:"rupers",attrs:{data:e.pers,"show-checkbox":"",multiple:""}})],1)]):e._e()],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(t){e.showEditModal=!1}}},[e._v(e._s(e._f("l")("取消")))]),e._v(" "),r("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e._f("l")("确定")))])],1)])],1)},o=[];a._withStripped=!0;var s={render:a,staticRenderFns:o};t.default=s}});