webpackJsonp([14],{289:function(t,n,e){"use strict";function a(t){d||(e(895),e(897))}Object.defineProperty(n,"__esModule",{value:!0});var i=e(514),o=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(n,t,function(){return i[t]})}(r);var s=e(899),l=e.n(s),d=!1,c=e(3),p=a,g=c(o.a,l.a,!1,p,null,null);g.options.__file="src\\views\\baseInfo\\organization.vue",n.default=g.exports},514:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(11),o=a(i),r=e(12),s=a(r),l=e(6);a(l);n.default={name:"access_index",data:function(){return{editOrganization:{},selectOrganization:{},showDetails:!1,persBtn:{create:abp.auth.isGranted("Pages.OrganizationUnits.Create"),update:abp.auth.isGranted("Pages.OrganizationUnits.Update"),delete:abp.auth.isGranted("Pages.OrganizationUnits.Delete"),setRole:abp.auth.isGranted("Pages.OrganizationUnits.SetRole"),setPers:abp.auth.isGranted("Pages.OrganizationUnits.SetPers")},detailsOrganization:{parentName:"",name:"",code:"",description:"",roleNames:""},showModal:!1,showEditModal:!1,newOrganizationRule:{name:[{required:!0,message:"Name is required",trigger:"blur"}],no:[{required:!0,message:"no is required",trigger:"blur"}]},organizationRule:{name:[{required:!0,message:"Name is required",trigger:"blur"}],no:[{required:!0,message:"Code is required",trigger:"blur"}]}}},methods:{create:function(){this.$store.dispatch({type:"organization/getorganzition",data:"-1"}),this.selectOrganization.data?(this.editOrganization={parentId:this.selectOrganization.data.id,parentName:this.selectOrganization.data.name},this.showModal=!0):(this.editOrganization={},this.showModal=!0)},update:function(){this.selectOrganization.data?(this.editOrganization=this.selectOrganization.data,this.$store.dispatch({type:"organization/getorganzition",data:this.editOrganization.id}),this.showEditModal=!0):this.$Message.warning("请选择编辑节点...")},deletes:function(){var t=this;if(!this.selectOrganization.data)return void this.$Message.warning("请选择删除节点...");this.$Modal.confirm({title:this.L(""),content:this.L("删除这个部门吗？"),okText:this.L("是"),cancelText:this.L("否"),onOk:function(){function n(){return e.apply(this,arguments)}var e=(0,s.default)(o.default.mark(function n(){return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch({type:"organization/delete",data:t.selectOrganization.data});case 2:t.$Message.success("删除成功！"),t.getpage();case 4:case"end":return n.stop()}},n,t)}));return n}()})},refresh:function(){this.getpage(),this.$Message.success("刷新成功！")},save:function(){function t(){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(){var n=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.editOrganization.id?this.$refs.organizationForm.validate(function(){var t=(0,s.default)(o.default.mark(function t(e){var a,i,r,s,l;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=17;break}return a=[],i=[],r=[],s=n.$refs.uoroles.getCheckedNodes(),l=n.$refs.uopers.getCheckedNodes(),s.forEach(function(t,n,e){a.push(t.id),r.push(t.title)}),l.forEach(function(t,n,e){i.push(t.id)}),n.editOrganization.roleIds=a,n.editOrganization.persIds=i,n.editOrganization.roleNames=r.join(","),t.next=13,n.$store.dispatch({type:"organization/update",data:n.editOrganization});case 13:return n.showEditModal=!1,n.$Message.success("保存成功！"),t.next=17,n.getpage();case 17:case"end":return t.stop()}},t,n)}));return function(n){return t.apply(this,arguments)}}()):this.$refs.newOrganizationForm.validate(function(){var t=(0,s.default)(o.default.mark(function t(e){var a,i,r,s,l;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=17;break}return a=[],i=[],r=[],s=n.$refs.coroles.getCheckedNodes(),l=n.$refs.copers.getCheckedNodes(),s.forEach(function(t,n,e){a.push(t.id),r.push(t.title)}),l.forEach(function(t,n,e){i.push(t.id)}),n.editOrganization.roleIds=a,n.editOrganization.persIds=i,n.editOrganization.roleNames=r.join(","),t.next=13,n.$store.dispatch({type:"organization/create",data:n.editOrganization});case 13:return n.showModal=!1,n.$Message.success("添加成功！"),t.next=17,n.getpage();case 17:case"end":return t.stop()}},t,n)}));return function(n){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,this)}));return t}(),onselectchange:function(t){this.showDetails=!0,this.selectOrganization=t.pop(),this.detailsOrganization=this.selectOrganization.data},getpage:function(){function t(){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch({type:"organization/getAll"});case 2:case"end":return t.stop()}},t,this)}));return t}()},computed:{organizations:function(){return this.$store.state.organization.organizations},roles:function(){return this.$store.state.organization.roles},pers:function(){return this.$store.state.organization.pers}},created:function(){function t(){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.getpage();case 1:case"end":return t.stop()}},t,this)}));return t}()}},895:function(t,n,e){var a=e(896);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(22)("0511739b",a,!1)},896:function(t,n,e){n=t.exports=e(21)(!1),n.push([t.i,'\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.form_table {\n  width: 100%;\n  table-layout: fixed;\n}\n.form_table th {\n  border: 1px solid #CCCCCC;\n  padding: 5px;\n  color: gray;\n  text-align: right;\n  /*background-color: #E0ECFF;*/\n  width: 180px;\n}\n.form_table td {\n  border: 1px solid #CCCCCC;\n  padding: 6px 0 5px 10px;\n  text-align: left;\n  color: #717171;\n  line-height: 200%;\n}\n.bg-light {\n  color: #58666e;\n  background-color: #edf1f2;\n}\n.wrapper-md {\n  padding: 20px;\n}\n.bg-light.lter,\n.bg-light .lter {\n  background-color: #f6f8f8;\n}\n.m-n {\n  margin: 0 !important;\n}\n.font-thin {\n  font-weight: 300;\n}\n.form_table1 {\n  width: 100%;\n  table-layout: fixed;\n}\n.padding10 {\n  padding: 10px !important;\n}\n.nobordertable,\n.hovertable {\n  margin-right: auto;\n  margin-left: auto;\n  width: 99%;\n}\n.nobordertable,\n.nobordertable tr {\n  font-family: "\\5B8B\\4F53";\n  font-size: 14px;\n  color: #000000;\n  border-collapse: collapse;\n}\n.nobordertable td {\n  font-family: "\\5B8B\\4F53";\n  font-size: 14px;\n  color: #045795;\n  padding-top: 10px;\n}\n.nobordertable .td1 {\n  text-align: right;\n  font-size: 12px;\n  color: #045795;\n  font-weight: bold;\n  width: 20%;\n}\n.nobordertable .td2 {\n  text-align: left;\n  font-size: 12px;\n  color: #222;\n  padding-left: 10px;\n}\n.hovertable,\n.hovertable tr,\n.hovertable td {\n  font-family: "\\5B8B\\4F53";\n  font-size: 14px;\n  color: #000000;\n  line-height: 30px;\n  border: 1px solid #ABCFF8;\n  border-collapse: collapse;\n}\n.hovertable .td1 {\n  text-align: right;\n  font-size: 12px;\n  color: #045795;\n  font-weight: bold;\n  width: 20%;\n}\n.hovertable .td2 {\n  text-align: left;\n  font-size: 12px;\n  color: #222;\n  padding-left: 10px;\n}\n.table_title {\n  font-weight: bold;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  padding-left: 10px;\n  color: #045795;\n  background-color: #e9f4fd;\n}\n.access-user-con {\n  height: 200px;\n}\n.access-current-user-con {\n  text-align: center;\n  padding-top: 10px;\n}\n.access-current-user-con img {\n  display: block;\n  width: 100px;\n  height: 100px;\n  border: 2px solid #dddde2;\n  border-radius: 50%;\n  margin: 0px auto 10px;\n}\n.access-current-user-con p {\n  display: block;\n  padding: 20px 0 0;\n}\n.access-current-user-con p b {\n  margin: 0 10px;\n  color: #2d8cf0;\n}\n.access-change-access-con-row {\n  height: 200px;\n}\n',""])},897:function(t,n,e){var a=e(898);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(22)("626b8ad1",a,!1)},898:function(t,n,e){n=t.exports=e(21)(!1),n.push([t.i,'\n.form_table {\n    width: 100%;\n    table-layout: fixed;\n}\n.form_table th {\n        border: 1px solid #CCCCCC;\n        padding: 5px;\n        color:gray;\n        text-align: right;\n        /*background-color: #E0ECFF;*/\n        width: 180px;\n}\n.form_table td {\n        border: 1px solid #CCCCCC;\n        padding: 6px 0 5px 10px;\n        text-align: left;\n        color: #717171;\n        line-height: 200%;\n}\n.bg-light {\n  color: #58666e;\n  background-color: #edf1f2;\n}\n.wrapper-md {\n  padding: 20px;\n}\n.bg-light.lter,\n.bg-light .lter {\n  background-color: #f6f8f8;\n}\n.m-n {\n  margin: 0 !important;\n}\n.font-thin {\n  font-weight: 300;\n}\n.form_table1 {\n    width: 100%;\n    table-layout: fixed;\n}\n.padding10 {\n    padding: 10px !important;\n}\n.nobordertable ,.hovertable{\n            margin-right: auto;\n            margin-left: auto;\n            width:99%;\n}\n.nobordertable,.nobordertable tr {  \n             font-family: "\\5B8B\\4F53";\n            font-size: 14px;\n            color: #000000;\n            border-collapse: collapse;\n}\n.nobordertable td {\n            font-family: "\\5B8B\\4F53";\n            font-size: 14px;\n            color: #045795;\n            padding-top:10px;\n}\n.nobordertable .td1 {\n    text-align: right;\n    font-size: 12px;\n    color: #045795;\n    font-weight: bold;\n    width: 20%;\n}\n.nobordertable .td2 {\n    text-align: left;\n    font-size: 12px;\n    color: #222;\n    padding-left: 10px;\n}\n.hovertable,.hovertable tr, .hovertable td {  \n             font-family: "\\5B8B\\4F53";\n            font-size: 14px;\n            color: #000000;\n            line-height: 30px;\n            border: 1px solid #ABCFF8;\n            border-collapse: collapse;\n}\n.hovertable .td1 {\n    text-align: right;\n    font-size: 12px;\n    color: #045795;\n    font-weight: bold;\n    width: 20%;\n}\n.hovertable .td2 {\n    text-align: left;\n    font-size: 12px;\n    color: #222;\n    padding-left: 10px;\n}\n.table_title {\n    font-weight: bold;\n    height: 32px;\n    line-height: 32px;\n    text-align: center;\n    padding-left: 10px;\n    color: #045795;\n    background-color: #e9f4fd;\n}\n      \n',""])},899:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Card",[e("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t._f("l")("部门管理")))]),t._v(" "),e("Row",[e("Col",{attrs:{span:"6"}},[e("Card",{staticStyle:{"min-height":"400px"}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    组织部门\n                ")]),t._v(" "),e("Tree",{attrs:{data:t.organizations},on:{"on-select-change":t.onselectchange}})],1)],1),t._v(" "),e("Col",{staticClass:"padding-left-10",attrs:{span:"18"}},[e("Card",{staticStyle:{"min-height":"400px"}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    详情\n                ")]),t._v(" "),e("ButtonGroup",{attrs:{slot:"extra"},slot:"extra"},[e("Button",{attrs:{type:"ghost",icon:"refresh"},on:{click:t.refresh}},[t._v("刷新")]),t._v(" "),t.persBtn.create?e("Button",{attrs:{type:"ghost",icon:"plus"},on:{click:t.create}},[t._v("添加")]):t._e(),t._v(" "),t.persBtn.update?e("Button",{attrs:{type:"ghost",icon:"edit"},on:{click:t.update}},[t._v("编辑")]):t._e(),t._v(" "),t.persBtn.delete?e("Button",{attrs:{type:"ghost",icon:"trash-a"},on:{click:t.deletes}},[t._v("删除")]):t._e()],1),t._v(" "),t.showDetails?e("div",{staticClass:"padding10"},[e("table",{staticClass:"hovertable",attrs:{model:t.detailsOrganization}},[e("tr",[e("td",{staticClass:"table_title",attrs:{colspan:"2"}},[t._v("部门信息详情")])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("上级节点名称：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.parentName))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("编号：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.no))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("名称：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.name))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("编码：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.code))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("部门主管：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.leader))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("部门最高领导人：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.header))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("描述：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.description))])]),t._v(" "),e("tr",[e("td",{staticClass:"td1"},[t._v("默认角色：")]),e("td",{staticClass:"td2"},[t._v(t._s(t.detailsOrganization.roleNames))])])])]):t._e()],1)],1)],1)],1),t._v(" "),e("Modal",{attrs:{title:t.L("添加"),okText:t.L("save"),cancelText:t.L("cancel")},on:{"on-ok":t.save},model:{value:t.showModal,callback:function(n){t.showModal=n},expression:"showModal"}},[e("div",[e("Tabs",[e("TabPane",{attrs:{label:"部门信息",icon:"ios-list"}},[e("Form",{ref:"newOrganizationForm",attrs:{"label-width":80,rules:t.newOrganizationRule,model:t.editOrganization}},[e("FormItem",{attrs:{label:t.L("上级名称"),prop:"parentName"}},[e("Input",{attrs:{disabled:"",maxlength:32,minlength:2},model:{value:t.editOrganization.parentName,callback:function(n){t.$set(t.editOrganization,"parentName",n)},expression:"editOrganization.parentName"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("编号"),prop:"no"}},[e("Input",{attrs:{maxlength:32,minlength:2},model:{value:t.editOrganization.no,callback:function(n){t.$set(t.editOrganization,"no",n)},expression:"editOrganization.no"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("名称"),prop:"name"}},[e("Input",{attrs:{maxlength:32,minlength:2},model:{value:t.editOrganization.name,callback:function(n){t.$set(t.editOrganization,"name",n)},expression:"editOrganization.name"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("编码"),prop:"code"}},[e("Input",{attrs:{maxlength:32,minlength:2},model:{value:t.editOrganization.code,callback:function(n){t.$set(t.editOrganization,"code",n)},expression:"editOrganization.code"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("描述"),prop:"description"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:t.editOrganization.description,callback:function(n){t.$set(t.editOrganization,"description",n)},expression:"editOrganization.description"}})],1)],1)],1),t._v(" "),t.persBtn.setRole?e("TabPane",{attrs:{label:"角色",icon:"ios-people"}},[e("div",{staticStyle:{"max-height":"320px","overflow-y":"auto"}},[e("Tree",{ref:"coroles",attrs:{data:t.roles,"show-checkbox":"",multiple:""}})],1)]):t._e(),t._v(" "),t.persBtn.setPers?e("TabPane",{attrs:{label:"权限",icon:"gear-b"}},[e("div",{staticStyle:{"max-height":"320px","overflow-y":"auto"}},[e("Tree",{ref:"copers",attrs:{data:t.pers,"show-checkbox":"",multiple:""}})],1)]):t._e()],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:function(n){t.showModal=!1}}},[t._v(t._s(t._f("l")("取消")))]),t._v(" "),e("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t._f("l")("确定")))])],1)]),t._v(" "),e("Modal",{attrs:{title:t.L("编辑"),okText:t.L("save"),cancelText:t.L("cancel")},on:{"on-ok":t.save},model:{value:t.showEditModal,callback:function(n){t.showEditModal=n},expression:"showEditModal"}},[e("div",[e("Tabs",[e("TabPane",{attrs:{label:"部门信息",icon:"ios-list"}},[e("Form",{ref:"organizationForm",attrs:{"label-width":80,rules:t.organizationRule,model:t.editOrganization}},[e("FormItem",{attrs:{label:t.L("上级名称"),prop:"parentName"}},[e("Input",{attrs:{disabled:"",maxlength:32,minlength:2},model:{value:t.editOrganization.parentName,callback:function(n){t.$set(t.editOrganization,"parentName",n)},expression:"editOrganization.parentName"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("编号"),prop:"no"}},[e("Input",{attrs:{maxlength:32,minlength:2},model:{value:t.editOrganization.no,callback:function(n){t.$set(t.editOrganization,"no",n)},expression:"editOrganization.no"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("名称"),prop:"name"}},[e("Input",{attrs:{maxlength:32,minlength:2},model:{value:t.editOrganization.name,callback:function(n){t.$set(t.editOrganization,"name",n)},expression:"editOrganization.name"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("编码"),prop:"code"}},[e("Input",{attrs:{maxlength:32,minlength:2},model:{value:t.editOrganization.code,callback:function(n){t.$set(t.editOrganization,"code",n)},expression:"editOrganization.code"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.L("描述"),prop:"description"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:t.editOrganization.description,callback:function(n){t.$set(t.editOrganization,"description",n)},expression:"editOrganization.description"}})],1)],1)],1),t._v(" "),t.persBtn.setRole?e("TabPane",{attrs:{label:"角色",icon:"ios-people"}},[e("div",{staticStyle:{"max-height":"320px","overflow-y":"auto"}},[e("Tree",{ref:"uoroles",attrs:{data:t.roles,"show-checkbox":"",multiple:""}})],1)]):t._e(),t._v(" "),t.persBtn.setPers?e("TabPane",{attrs:{label:"权限",icon:"gear-b"}},[e("div",{staticStyle:{"max-height":"320px","overflow-y":"auto"}},[e("Tree",{ref:"uopers",attrs:{data:t.pers,"show-checkbox":"",multiple:""}})],1)]):t._e()],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:function(n){t.showEditModal=!1}}},[t._v(t._s(t._f("l")("取消")))]),t._v(" "),e("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t._f("l")("确定")))])],1)])],1)},i=[];a._withStripped=!0;var o={render:a,staticRenderFns:i};n.default=o}});