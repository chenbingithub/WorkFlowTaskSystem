webpackJsonp([31],{292:function(e,t,n){"use strict";function i(e){d||n(904)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(517),r=n.n(s);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);var o=n(906),l=n.n(o),d=!1,c=n(3),p=i,u=c(r.a,l.a,!1,p,null,null);u.options.__file="src\\views\\baseInfo\\permission.vue",t.default=u.exports},517:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),r=i(s),a=n(12),o=i(a),l=n(6);i(l);t.default={name:"access_index",data:function(){return{editPermission:{},selectPermission:{},showDetails:!1,persBtn:{create:abp.auth.isGranted("Pages.Permissions.Create"),update:abp.auth.isGranted("Pages.Permissions.Update"),delete:abp.auth.isGranted("Pages.Permissions.Delete")},detailsPermission:{parentName:"",name:"",code:"",description:""},showModal:!1,showEditModal:!1,newPermissionRule:{name:[{required:!0,message:"Name is required",trigger:"blur"}],code:[{required:!0,message:"Code is required",trigger:"blur"}]},permissionRule:{name:[{required:!0,message:"Name is required",trigger:"blur"}],code:[{required:!0,message:"Code is required",trigger:"blur"}]}}},methods:{create:function(){this.selectPermission.data?(this.editPermission={isActive:!0,parentId:this.selectPermission.data.id,parentName:this.selectPermission.data.name},this.showModal=!0):(this.editPermission={isActive:!0},this.showModal=!0)},update:function(){this.selectPermission.data?(this.editPermission=this.selectPermission.data,this.showEditModal=!0):this.$Message.warning("请选择编辑节点...")},deletes:function(){var e=this;if(!this.selectPermission.data)return void this.$Message.warning("请选择删除节点...");this.$Modal.confirm({title:this.L(""),content:this.L("删除这个权限吗？"),okText:this.L("是"),cancelText:this.L("否"),onOk:function(){function t(){return n.apply(this,arguments)}var n=(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"permission/delete",data:e.selectPermission.data});case 2:e.$Message.success("删除成功！"),e.getpage();case 4:case"end":return t.stop()}},t,e)}));return t}()})},refresh:function(){this.getpage(),this.$Message.success("刷新成功！")},save:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(r.default.mark(function e(){var t=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.editPermission.id?this.$refs.permissionForm.validate(function(){var e=(0,o.default)(r.default.mark(function e(n){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,t.$store.dispatch({type:"permission/update",data:t.editPermission});case 3:return t.showEditModal=!1,t.$Message.success("保存成功！"),e.next=7,t.getpage();case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()):this.$refs.newPermissionForm.validate(function(){var e=(0,o.default)(r.default.mark(function e(n){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,t.$store.dispatch({type:"permission/create",data:t.editPermission});case 3:return t.showModal=!1,t.$Message.success("添加成功！"),e.next=7,t.getpage();case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return e}(),onselectchange:function(e){this.showDetails=!0,this.selectPermission=e.pop(),this.detailsPermission=this.selectPermission.data,console.log(e)},getpage:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch({type:"permission/getAllTree"});case 2:case"end":return e.stop()}},e,this)}));return e}()},computed:{permissions:function(){return this.$store.state.permission.permissions}},created:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getpage();case 1:case"end":return e.stop()}},e,this)}));return e}()}},904:function(e,t,n){var i=n(905);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(22)("1163ef00",i,!1)},905:function(e,t,n){t=e.exports=n(21)(!1),t.push([e.i,'\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.form_table {\n  width: 100%;\n  table-layout: fixed;\n}\n.form_table th {\n  border: 1px solid #CCCCCC;\n  padding: 5px;\n  color: gray;\n  text-align: right;\n  /*background-color: #E0ECFF;*/\n  width: 180px;\n}\n.form_table td {\n  border: 1px solid #CCCCCC;\n  padding: 6px 0 5px 10px;\n  text-align: left;\n  color: #717171;\n  line-height: 200%;\n}\n.bg-light {\n  color: #58666e;\n  background-color: #edf1f2;\n}\n.wrapper-md {\n  padding: 20px;\n}\n.bg-light.lter,\n.bg-light .lter {\n  background-color: #f6f8f8;\n}\n.m-n {\n  margin: 0 !important;\n}\n.font-thin {\n  font-weight: 300;\n}\n.form_table1 {\n  width: 100%;\n  table-layout: fixed;\n}\n.padding10 {\n  padding: 10px !important;\n}\n.nobordertable,\n.hovertable {\n  margin-right: auto;\n  margin-left: auto;\n  width: 99%;\n}\n.nobordertable,\n.nobordertable tr {\n  font-family: "\\5B8B\\4F53";\n  font-size: 14px;\n  color: #000000;\n  border-collapse: collapse;\n}\n.nobordertable td {\n  font-family: "\\5B8B\\4F53";\n  font-size: 14px;\n  color: #045795;\n  padding-top: 10px;\n}\n.nobordertable .td1 {\n  text-align: right;\n  font-size: 12px;\n  color: #045795;\n  font-weight: bold;\n  width: 20%;\n}\n.nobordertable .td2 {\n  text-align: left;\n  font-size: 12px;\n  color: #222;\n  padding-left: 10px;\n}\n.hovertable,\n.hovertable tr,\n.hovertable td {\n  font-family: "\\5B8B\\4F53";\n  font-size: 14px;\n  color: #000000;\n  line-height: 30px;\n  border: 1px solid #ABCFF8;\n  border-collapse: collapse;\n}\n.hovertable .td1 {\n  text-align: right;\n  font-size: 12px;\n  color: #045795;\n  font-weight: bold;\n  width: 20%;\n}\n.hovertable .td2 {\n  text-align: left;\n  font-size: 12px;\n  color: #222;\n  padding-left: 10px;\n}\n.table_title {\n  font-weight: bold;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  padding-left: 10px;\n  color: #045795;\n  background-color: #e9f4fd;\n}\n.access-user-con {\n  height: 200px;\n}\n.access-current-user-con {\n  text-align: center;\n  padding-top: 10px;\n}\n.access-current-user-con img {\n  display: block;\n  width: 100px;\n  height: 100px;\n  border: 2px solid #dddde2;\n  border-radius: 50%;\n  margin: 0px auto 10px;\n}\n.access-current-user-con p {\n  display: block;\n  padding: 20px 0 0;\n}\n.access-current-user-con p b {\n  margin: 0 10px;\n  color: #2d8cf0;\n}\n.access-change-access-con-row {\n  height: 200px;\n}\n',""])},906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e._f("l")("权限管理")))]),e._v(" "),n("Row",[n("Col",{attrs:{span:"6"}},[n("Card",{staticStyle:{"min-height":"400px"}},[n("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    权限菜单\n                ")]),e._v(" "),n("Tree",{attrs:{data:e.permissions},on:{"on-select-change":e.onselectchange}})],1)],1),e._v(" "),n("Col",{staticClass:"padding-left-10",attrs:{span:"18"}},[n("Card",{staticStyle:{"min-height":"400px"}},[n("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    详情\n                ")]),e._v(" "),n("ButtonGroup",{attrs:{slot:"extra"},slot:"extra"},[n("Button",{attrs:{type:"ghost",icon:"refresh"},on:{click:e.refresh}},[e._v("刷新")]),e._v(" "),e.persBtn.create?n("Button",{attrs:{type:"ghost",icon:"plus"},on:{click:e.create}},[e._v("添加")]):e._e(),e._v(" "),e.persBtn.update?n("Button",{attrs:{type:"ghost",icon:"edit"},on:{click:e.update}},[e._v("编辑")]):e._e(),e._v(" "),e.persBtn.delete?n("Button",{attrs:{type:"ghost",icon:"trash-a"},on:{click:e.deletes}},[e._v("删除")]):e._e()],1),e._v(" "),e.showDetails?n("div",{staticClass:"padding10"},[n("table",{staticClass:"hovertable",attrs:{model:e.detailsPermission}},[n("tr",[n("td",{staticClass:"table_title",attrs:{colspan:"2"}},[e._v("权限信息详情")])]),e._v(" "),n("tr",[n("td",{staticClass:"td1"},[e._v("上级节点名称：")]),n("td",{staticClass:"td2"},[e._v(e._s(e.detailsPermission.parentName))])]),e._v(" "),n("tr",[n("td",{staticClass:"td1"},[e._v("名称：")]),n("td",{staticClass:"td2"},[e._v(e._s(e.detailsPermission.name))])]),e._v(" "),n("tr",[n("td",{staticClass:"td1"},[e._v("编码：")]),n("td",{staticClass:"td2"},[e._v(e._s(e.detailsPermission.code))])]),e._v(" "),n("tr",[n("td",{staticClass:"td1"},[e._v("描述：")]),n("td",{staticClass:"td2"},[e._v(e._s(e.detailsPermission.description))])])])]):e._e()],1)],1)],1)],1),e._v(" "),n("Modal",{attrs:{title:e.L("添加"),okText:e.L("save"),cancelText:e.L("cancel")},on:{"on-ok":e.save},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n("div",[n("Form",{ref:"newPermissionForm",attrs:{"label-position":"top",rules:e.newPermissionRule,model:e.editPermission}},[n("FormItem",{attrs:{label:e.L("上级名称"),prop:"parentName"}},[n("Input",{attrs:{disabled:"",maxlength:32,minlength:2},model:{value:e.editPermission.parentName,callback:function(t){e.$set(e.editPermission,"parentName",t)},expression:"editPermission.parentName"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.L("名称"),prop:"name"}},[n("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editPermission.name,callback:function(t){e.$set(e.editPermission,"name",t)},expression:"editPermission.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.L("编码"),prop:"code"}},[n("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editPermission.code,callback:function(t){e.$set(e.editPermission,"code",t)},expression:"editPermission.code"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.L("描述"),prop:"description"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:e.editPermission.description,callback:function(t){e.$set(e.editPermission,"description",t)},expression:"editPermission.description"}})],1)],1)],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:function(t){e.showModal=!1}}},[e._v(e._s(e._f("l")("取消")))]),e._v(" "),n("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e._f("l")("确定")))])],1)]),e._v(" "),n("Modal",{attrs:{title:e.L("编辑"),okText:e.L("save"),cancelText:e.L("cancel")},on:{"on-ok":e.save},model:{value:e.showEditModal,callback:function(t){e.showEditModal=t},expression:"showEditModal"}},[n("div",[n("Form",{ref:"permissionForm",attrs:{"label-position":"top",rules:e.permissionRule,model:e.editPermission}},[n("FormItem",{attrs:{label:e.L("上级名称"),prop:"parentName"}},[n("Input",{attrs:{disabled:"",maxlength:32,minlength:2},model:{value:e.editPermission.parentName,callback:function(t){e.$set(e.editPermission,"parentName",t)},expression:"editPermission.parentName"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.L("名称"),prop:"name"}},[n("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editPermission.name,callback:function(t){e.$set(e.editPermission,"name",t)},expression:"editPermission.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.L("编码"),prop:"code"}},[n("Input",{attrs:{maxlength:32,minlength:2},model:{value:e.editPermission.code,callback:function(t){e.$set(e.editPermission,"code",t)},expression:"editPermission.code"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.L("描述"),prop:"description"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入..."},model:{value:e.editPermission.description,callback:function(t){e.$set(e.editPermission,"description",t)},expression:"editPermission.description"}})],1)],1)],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:function(t){e.showEditModal=!1}}},[e._v(e._s(e._f("l")("取消")))]),e._v(" "),n("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e._f("l")("确定")))])],1)])],1)},s=[];i._withStripped=!0;var r={render:i,staticRenderFns:s};t.default=r}});